<div class="dashboard-container">
  <!-- KPI Section (unchanged structure) -->
  <div class="kpi-container">
    <!-- KPI Employees -->
    <div class="kpi-card employee-card">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="kpi-text">
          <h3 class="kpi-value">{{ kpis.totalEmployees | number }}</h3>
          <p class="kpi-label">Employees</p>
        </div>
      </div>
     
    </div>

    <!-- KPI Projects -->
    <div class="kpi-card project-card">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="fas fa-project-diagram"></i>
        </div>
        <div class="kpi-text">
          <h3 class="kpi-value">{{ kpis.totalProjects | number }}</h3>
          <p class="kpi-label">Projects</p>
        </div>
      </div>
      
    </div>
  </div>

  <!-- Projects Section (unchanged structure) -->
  <div class="projects-section">
    <h2>Project List</h2>
    <div class="projects-grid">
      <div *ngFor="let project of projects" class="project-card" (click)="loadProjectTickets(project)">
        <div class="project-header">
          <h3>{{ project.name }}</h3>
          <span class="ticket-count">{{ getTicketCount(project) }} tickets</span>
        </div>
        <div class="project-description">
          {{ project.description || 'No description available' }}
        </div>
        <div class="project-footer">
          <span class="project-status" [ngClass]="{
            'status-active': project.status === 'ACTIVE',
            'status-completed': project.status === 'COMPLETED',
            'status-pending': project.status === 'PENDING'
          }">
            {{ project.workedOn.name || 'UNKNOWN STATUS' }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- New Compact Pop-up -->
  <div *ngIf="selectedProject" class="modal-overlay" (click)="backToProjects()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <div class="project-title">
          <h3>{{ selectedProject.name }}</h3>
          <span class="ticket-count">{{ projectTickets.length }} ticket(s)</span>
        </div>
        <button class="close-button" (click)="backToProjects()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-content">
        <div *ngIf="projectTickets.length > 0" class="tickets-list">
          <div *ngFor="let ticket of projectTickets" class="ticket-item">
            <div class="ticket-header">
              <div class="ticket-title">
                <span class="ticket-number">#{{ ticket.ticketNumber }}</span>
                <h4>{{ ticket.title }}</h4>
              </div>
              <span class="ticket-status" [ngClass]="'status-' + ticket.status.toLowerCase()">
                {{ ticket.status }}
              </span>
            </div>

            <div class="ticket-body">
              <p class="ticket-description" *ngIf="ticket.description">
                {{ ticket.description }}
              </p>
              <div class="ticket-footer" *ngIf="ticket.assignTo">
                <i class="fas fa-user"></i>
                <span>{{ ticket.assignTo.firstname }} {{ ticket.assignTo.lastname }}</span>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="projectTickets.length === 0" class="no-tickets">
          <i class="fas fa-inbox"></i>
          <p>No tickets found</p>
        </div>
      </div>
    </div>
  </div>

  <div class="loading-container" *ngIf="isLoading">
    <div class="custom-spinner"></div>
    <p>Loading...</p>
  </div>
</div>
